<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Access-Control-Allow-Origin" content="*"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>The Economic Impact of COVID-19 on NYC's Workforce</title>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free-5.13.0-web/css/all.css" rel="stylesheet" type="text/css">
  <link href="https://fontawesome.com/icons?d=gallery&q=covid-19&m=free">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

  <!-- Custom styles for this template-->
  <link href="css/sb-admin-2.css" rel="stylesheet">
  <script src="https://d3js.org/d3.v5.min.js" charset="utf-8"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script src="https://d3js.org/topojson.v2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="cases.js"></script>
  <script src="income_pl.js"></script>
  <script src="unemp_map_list.js"></script>

  <!-- Page level custom scripts -->
  <!--<script src="js/demo/chart-area-demo.js"></script>-->
</head>

<body id="page-top">

  <!-- Page Wrapper -->
  <div id="wrapper">

    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">

        <div class="sidebar-brand-text mx-3">COVID 19 & NYC's Workforce <sup>2</sup></div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <li class="nav-item active">
        <a class="nav-link " href="index.html">
          <i class="fas fa-viruses"></i>
          <span class="text-gray-800">About Project</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->


      <!-- Nav Item - Pages Collapse Menu -->
      <li class="nav-item">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
          <i class="fas fa-not-equal"></i>
          <span class="text-gray-800" >The Divide</span>
        </a>
        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
          <div class="bg-new py-2 collapse-inner rounded">
            <a class="collapse-item text-white" href="income.html">Income Vulnerability</a>
            <a class="collapse-item text-white" href="health.html">Health Risk Vulnerability</a>
          </div>
        </div>
      </li>
      <!-- Divider -->
      <hr class="sidebar-divider">
      <li class="nav-item active">
        <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseTwos" aria-expanded="true" aria-controls="collapseTwo">
          <i class="fas fa-briefcase"></i>
          <span class="text-gray-800" >Impact on Workforce</span>
        </a>
        <div id="collapseTwos" class="collapse show" aria-labelledby="headingTwo" data-parent="#accordionSidebar">
          <div class="bg-new py-2 collapse-inner rounded">
            <a class="collapse-item text-white" href="workforce.html">By Borough</a>
            <a class="collapse-item text-two" href="unemp_ind_page.html">By Industry</a>
          </div>
        </div>
      </li>
      <hr class="sidebar-divider">
      <!-- Nav Item - Utilities Collapse Menu -->
      <li class="nav-item active">
        <a class="nav-link " href="lookingahead.html">
        <i class="fas fa-fast-forward"></i>
          <span class="text-gray-800">Looking Ahead..</span></a>
      </li>
      <!-- Divider -->

      <!-- Divider -->
      <hr class="sidebar-divider d-none d-md-block">

      <!-- Sidebar Toggler (Sidebar) -->
      <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>

    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content" class="bg-new">

        <!-- Topbar -->


        <!-- Begin Page Content -->
        <div class="container-fluid bg-new">

          <!-- Page Heading -->
          <div class="d-sm-flex align-items-center justify-content-between mb-4">
            <h1 class="h1 mb-0 text-gray-800"> What Workers Were Most Affected? </h1>

          </div>
          <!-- Content Row -->

          <div class="row">
             <div class="col-lg-6 bg-new mr-4" id='my_dataviz'>

            </div>
</div>
<div class="row">
           <!-- <div class="row"> -->

          <div class="col-lg-11  mb-4">

            <!-- Illustrations -->
            <div class="card shadow mb-4 bg-new">

              <div class="card-body">
                <h4 class="text-gray-800"> How has the NY State stay at home order impacted industries? </h4>
                <p class="text-white">Between the week of March 14 to May 2, an estimated 1,837,700 workers in NY State filed for unemployment. With a stay at home order in place, most businesses were forced to shut their doors, inducing a cascading number of workers to be furloughed. The hardest hit industries in NY state were:</p>
                <p> <span class="text-white"> #1 Accommodations and Food Services &rarr; </span>
                      <span class="text-gray "> Total Claims : 336,616<br></p>
                <p> <span class="text-white"> #2 Retail Trade: total # over 7 weeks, highest weekly claims &rarr; </span>
                    <span class="text-gray "> Total Claims : 238,437<br></p>
                <p> <span class="text-white"> #3 Healthcare and Social Assistance: total # over 7 weeks, highest weekly claims  &rarr; </span>
                    <span class="text-gray "> Total Claims : 203,031 <br></p>



                </div>
              </div>
          </div>
</div>
<div class="row">
  <div class="mb-5">
  <a href="lookingahead.html" class="btn btn-primary btn-circle">
    <span class="icon text-gray-600">
    <i class="fas fa-chevron-down mr-3 ml-3"></i>
    </span>
  </a></div>


</div>
          <script>

          // set the dimensions and margins of the graph
          var width = 950,
              height = 300,
              margin = 200

          // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
          var radius = Math.min(width, height) / 2

          // append the svg object to the div called 'my_dataviz'
          var svg = d3.select("#my_dataviz")
            .append("svg")
              .attr("width", width)
              .attr("height", height)
            .append("g")
              .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

          // Create dummy data
          // var data = {a: 9, b: 20, c:30, d:8, e:12, f:3, g:7, h:14}
            var data = {"Accommod & Food Services": 336616,"Admin & Support Services": 155086, "Ag, Forest, Fish & Hunt": 1690, "Arts, Entertain & Rec": 64662, "Construction & Utilities": 156762,"Ed Services": 45961,"Finance & Insurance": 13650,"Healthcare & Social Assist":203031,"Information":58006,"Management":8561,"Manufacturing":92189,"Mining":1178,"Other Services":101222, "Prof & Tech Services":63598,"Public Adminn":9942,"Real Estate":27253, "Retail Trade":238437, "Transportation":81591,"Unclassified":117833,"Wholesale Trade":60498}

          // set the color scale
          var color = d3.scaleOrdinal()
            .domain(["Accommod & Food Services","Admin & Support Services", "Ag, Forest, Fish & Hunt", "Arts, Entertain & Re","Construction & Utilities","Ed Services","Finance & Insurance","Healthcare & Social Assist",  "Information","Management", "Manufacturing","Mining","Other Services","Prof & Tech Services","Public Admin","Real Estate","Retail Trade","Transportation","Unclassified","Wholesale Trade"])
            .range(["#d70005", "#ff7074", "#00847f", "#00847f", "#ff7074", "#00847f", "#70fffa",  "#d70005", "#00847f", "#00847f", "#ffa4a6", "#00847f", "#ffa4a6", "#00847f", "#70fffa", "#70fffa", "#d70005", "#ffa4a6", "#ffa4a6", "#00847f"]);
              // "#00847f","#70fffa","#a4fffc", "#ffa4a6", "#ff7074", "#d70005"]);

          // Compute the position of each group on the pie:
          var pie = d3.pie()
            .sort(null) // Do not sort group by size
            .value(function(d) {return d.value; })
          var data_ready = pie(d3.entries(data))

          // The arc generator
          var arc = d3.arc()
            .innerRadius(radius * 0.3)         // This is the size of the donut hole
            .outerRadius(radius * 0.6)

          // Another arc that won't be drawn. Just for labels positioning
          var outerArc = d3.arc()
            .innerRadius(radius * 0.7)
            .outerRadius(radius * 0.7)

          // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
          svg
            .selectAll('allSlices')
            .data(data_ready)
            .enter()
            .append('path')
            .attr('d', arc)
            .attr('fill', function(d){ return(color(d.data.key)) })
            .attr("stroke", "#e3e3f3")
            .style("stroke-width", "2px")
            .style("opacity", 0.7)

          // Add the polylines between chart and labels:
          svg
            .selectAll('allPolylines')
            .data(data_ready)
            .enter()
            .append('polyline')
              .attr("stroke", "#e3e3f3")
              .style("fill", "none")
              .attr("stroke-width", 1)
              .attr('points', function(d) {
                var posA = arc.centroid(d) // line insertion in the slice
                var posB = outerArc.centroid(d) // line break: we use the other arc generator that has been built only for that
                var posC = outerArc.centroid(d); // Label position = almost the same as posB
                var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2 // we need the angle to see if the X position will be at the extreme right or extreme left
                posC[0] = radius * 0.95 * (midangle < Math.PI ? 1 : -1); // multiply by 1 or -1 to put it on the right or on the left
                return [posA, posB, posC]
              })

          // Add the polylines between chart and labels:
          svg
            .selectAll('allLabels')
            .data(data_ready)
            .enter()
            .append('text')
              .attr("fill", "white")
              .attr("font-size", "9px")
              .text( function(d) { console.log(d.data.key) ; return d.data.key } )
              .attr('transform', function(d) {
                  var pos = outerArc.centroid(d);
                  var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                  pos[0] = radius * 0.99 * (midangle < Math.PI ? 1 : -1);
                  return 'translate(' + pos + ')';
              })
              .style('text-anchor', function(d) {
                  var midangle = d.startAngle + (d.endAngle - d.startAngle) / 2
                  return (midangle < Math.PI ? 'start' : 'end')
              })


          </script>

<!--
          <div class="row">
            <div class="mb-5">
            <a href="#" class="btn btn-primary btn-circle">
              <span class="icon text-gray-600">
              <i class="fas fa-chevron-down mr-3 ml-3"></i>
              </span>
            </a></div>


          </div>
        </div>
        <!-- /.container-fluid -->

      </div>
      <!-- End of Main Content -->

      <!-- Footer -->

      <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->

  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>

  <!-- Page level plugins -->


  <!-- Page level custom scripts -->


</body>

</html>
